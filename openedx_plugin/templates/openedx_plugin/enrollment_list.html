<!-- openedx-plugin-nacar/openedx_plugin/templates/openedx_plugin/enrollment_list.html -->
{% extends "main.django.html" %}

{% block title %}Enrollment List - {{ course.display_name }}{% endblock %}

{% block content %}
<div class="container wrapper-course-instructor" style="margin-top: 20px;">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{{ course_about_page_url }}">{{ course.display_name }}</a></li>
            <li class="breadcrumb-item"><a href="{% url 'instructor_dashboard' course.id %}">Instructor Dashboard</a></li>
            <li class="breadcrumb-item active" aria-current="page">Enrollment List</li>
        </ol>
    </nav>

    <h2>Enrolled Students ({{ students|length }})</h2>

    <div class="mb-3">
        <input type="text" id="search" class="form-control" placeholder="Search by username, email, or name...">
    </div>

    <div class="table-responsive">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Username</th>
                    <th>Full Name</th>
                    <th>Email</th>
                    <th>Enrollment Date</th>
                    <th>Mode</th>
                </tr>
            </thead>
            <tbody>
                {% for student in students %}
                <tr>
                    <td>{{ student.username }}</td>
                    <td>{{ student.full_name }}</td>
                    <td>{{ student.email }}</td>
                    <td>{{ student.enrollment_date|date:"Y-m-d H:i" }}</td>
                    <td>{{ student.mode }}</td>
                </tr>
                {% empty %}
                <tr><td colspan="5" class="text-center">No enrolled students.</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<script>
document.getElementById('search').addEventListener('keyup', function() {
    const term = this.value.toLowerCase();
    document.querySelectorAll('tbody tr').forEach(row => {
        row.style.display = row.textContent.toLowerCase().includes(term) ? '' : 'none';
    });
});
</script>
{% endblock %}